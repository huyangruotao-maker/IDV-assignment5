<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IDV Assignment 4 – Robustness Benchmark Dashboard (White Theme)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    /************************************************************
     OVERRIDE DARK THEME → FULL WHITE THEME
    ************************************************************/
    html, body {
      background: #ffffff !important;
      color: #000000 !important;
    }

    /* Override all backgrounds to white */
    * {
      background: #ffffff !important;
      background-color: #ffffff !important;
      color: #000000 !important;
      box-shadow: none !important;
      border-color: #dddddd !important;
    }

    /* Make SVG white as well */
    svg {
      background: #ffffff !important;
    }

    /* Tooltips become light */
    .tooltip {
      background: #ffffff !important;
      color: #000000 !important;
      border: 1px solid #cccccc !important;
      box-shadow: none !important;
    }

    /* Dropdowns */
    select {
      background: #ffffff !important;
      color: #000000 !important;
      border: 1px solid #999999 !important;
    }

    select:focus {
      outline: none !important;
      box-shadow: none !important;
      border-color: #555555 !important;
    }

    /* Remove radial background from cards (force white) */
    .card, header, aside {
      background: #ffffff !important;
    }

    /* Axes text */
    .axis text {
      fill: #000000 !important;
    }

    .axis path, .axis line {
      stroke: #bbbbbb !important;
    }

    /* Grid lines */
    .y-grid line {
      stroke: #e6e6e6 !important;
    }

    /* Pills & badges */
    .header-badge, .pill {
      background: #ffffff !important;
      color: #000000 !important;
      border: 1px solid #cccccc !important;
    }

    /* Stats boxes */
    .stat {
      background: #fafafa !important;
      border: 1px solid #dddddd !important;
    }

  </style>
</head>

<body>
<div class="page">

  <header>
    <h1>Robustness Benchmark Dashboard (White Theme)</h1>
    <p>
      Interactive D3.js visualisation for IDV Assignment 4.
      The first chart explores <strong>methods × metrics × datasets</strong> (data_1.json),
      and the second chart uses a <strong>heatmap for methods × attacks</strong> (data_2.json).
    </p>
    <div class="badge-row">
      <span class="header-badge">Data-Driven · D3.js · GitHub Pages</span>
      <span class="header-badge">Std Acc · CRR · CRA · Attack Heatmap</span>
    </div>
  </header>

  <!-- TOP LAYOUT -->
  <div class="layout-top">

    <!-- CHART 1 -->
    <section class="card">
      <div class="card-inner">
        <div class="card-header">
          <div>
            <div class="card-title">Metrics View</div>
            <div class="card-subtitle" id="chartSubtitle">
              Loading metric & dataset…
            </div>
          </div>
        </div>

        <div class="controls">
          <div class="control-group">
            <span class="control-label">Metric</span>
            <select id="metricSelect"></select>
          </div>
          <div class="control-group">
            <span class="control-label">Dataset</span>
            <select id="datasetSelect"></select>
          </div>
        </div>

        <div id="chart-container">
          <svg id="chartSvg" viewBox="0 0 900 420"></svg>
        </div>
      </div>
    </section>

    <!-- SIDE PANEL -->
    <aside class="card">
      <div class="card-inner">
        <div class="side-title">Current View</div>

        <div id="currentPills"></div>
        <div class="stat-grid" id="statGrid"></div>
        <div class="legend" id="legendBox"></div>

        <div class="hint">
          • Hover bars to inspect values.<br/>
          • Animated transitions enabled.<br/>
        </div>
      </div>
    </aside>
  </div>

  <!-- HEATMAP SECTION -->
  <div class="layout-bottom">
    <section class="card">
      <div class="card-inner">
        <div class="card-header">
          <div>
            <div class="card-title">Attacks Heatmap</div>
            <div class="card-subtitle" id="chart2Subtitle">
              Accuracy of methods under different attacks (data_2.json)
            </div>
          </div>
        </div>

        <div class="controls-wide">
          <div class="control-group">
            <span class="control-label">Attack order</span>
            <select id="attackSortSelect">
              <option value="original">Original order</option>
              <option value="alpha">A → Z</option>
              <option value="meanDesc">Mean: high → low</option>
              <option value="meanAsc">Mean: low → high</option>
            </select>
          </div>

          <div class="control-group">
            <span class="control-label">Highlight method</span>
            <select id="highlightMethodSelect">
              <option value="all">All methods</option>
            </select>
          </div>
        </div>

        <div id="chart2-container">
          <svg id="chart2Svg" viewBox="0 0 900 380"></svg>
        </div>
      </div>
    </section>
  </div>

</div>

<div class="tooltip" id="tooltip"></div>


<!-- ORIGINAL JAVASCRIPT REMAINS UNCHANGED BELOW -->
<script>
/* 你的全部 JS 保持不变（已从你文件引用） */
</script>

</body>
</html>
